int c = n;
int c0 = 0;
int c1 = 0;

while((c&amp;1)==0 &amp;&amp; c!=0) {
c0++; c >>= 1;
}
while((c&amp;1) == 1) {
c1++; c >>= 1;
}
if(c0+c1 == 32 || c0+c1 == 0) return -1;

int p = c0+c1;
n |= (1<<p);
n &amp;= ~((1<<p)-1);
n |= (1<<(c1-1))-1;
return n;
}

}

